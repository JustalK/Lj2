language: node_js
node_js:
  - 15
  - 14
  - 12
services:
  - mongodb
cache:
  npm: true
  directories:
    - ~/.cache
    - ~/.cache/Cypress
install:
  - npm install cypress
script:
  - npm run seed
  - npm run server &
  - sleep 10s
  - npm run cypress
after_success: npm run coverage
